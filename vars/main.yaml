# vim: set softtabstop=2 tabstop=2 shiftwidth=2 expandtab autoindent smartindent syntax=yaml:

nomad_datacenter: nbg1
consul_datacenter: nbg1
vault_datacenter: nbg1

consul_acl_datacenter: nbg1
vault_cluster_name: nbg1

nomad_advertise_address: "{{ ansible_default_ipv4.address }}"
#nomad_node_role: both # see inventory

nomad_config_custom:
  plugin:
    - raw_exec:
      - config:
        - enabled: true
    - docker:
      - config:
        - allow_caps:
          # defaults as per: https://www.nomadproject.io/docs/drivers/docker.html#plugin_caps
          - CHOWNDAC_OVERRIDE
          - FSETID
          - FOWNER
          - MKNOD
          - NET_RAW
          - SETGID
          - SETUID
          - SETFCAP
          - SETPCAP
          - NET_BIND_SERVICE
          - SYS_CHROOT
          - KILL
          - AUDIT_WRITE
          - SYS_PTRACE # netdata requirement
          - DAC_OVERRIDE # netdata requirement due to seccomp=apparmor
          - CHOWN # netdata requirement due to seccomp=apparmor
